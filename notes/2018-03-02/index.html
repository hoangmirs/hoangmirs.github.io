<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>2018 03 02 - Mirs's page</title>
	<meta name="description" content="Hiện tại hầu như trang web nào cũng có một khung tìm kiếm để tìm các thông tin từ nó. Và chắc hẳn nhiều bạn vừa mới tìm hiểu về web không biết nên bắt đầu từ đâu để làm ra một khung search như thế đúng không?">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#2d2a2a">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#2d2a2a">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#2d2a2a">

	<link href="https://fonts.googleapis.com/css?family=Finger+Paint|PT+Sans:400,700" rel="stylesheet">
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/assets/css/main.css">
	
		<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
	
		<link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
	
</head>

<body>

  <aside class="sidebar">

  <div class="sidebar-container">
    <div class="sidebar-logo">
      <a href="/" class="logo">Mirs</a>
    </div>

    <menu class="sidebar-menu">
      <li class="menu-items"><a class="menu-links" href="/">Home</a></li>
      <li class="menu-items"><a class="menu-links" href="/notes/">Notes</a></li>
      <li class="menu-items"><a class="menu-links" href="/about/">About</a></li>
      <li class="menu-items"><a class="menu-links" href="/contact/">Contact</a></li>
    </menu>

    <div class="sidebar-social">
      <li class="social-items"><a target="_blank" href="https://www.facebook.com/hoangmirs" class="social-links"><i class="social-icons fa fa-facebook" aria-hidden="true"></i></a></li>
      <li class="social-items"><a target="_blank" href="https://twitter.com/hoangmirs" class="social-links"><i class="social-icons fa fa-twitter" aria-hidden="true"></i></a></li>
      <li class="social-items"><a target="_blank" href="https://plus.google.com/+HoàngMirs" class="social-links"><i class="social-icons fa fa-google-plus" aria-hidden="true"></i></a></li>
      <li class="social-items"><a target="_blank" href="https://github.com/hoangmirs" class="social-links"><i class="social-icons fa fa-github" aria-hidden="true"></i></a></li>
    </div>

  </div>
</aside>


  <main role="main">
    <div class="content">
      
  <article class="page-article">
  <div class="wrap-content">
    <div class="pagination" style="display: flex; justify-content: flex-start">
      <a href="javascript:history.back()" class="previous"><i class="fa fa-chevron-left" aria-hidden="true"></i></a>
    </div>
    <header class="page-header">
      <h1 class="page-title">2018, Mar 01</h1>
      <div class="page-date"><span>Danang, Vietnam</span></div>
    </header>
    <div class="page-content">
      
      <h2 id="phần-1-giới-thiệu"><strong>Phần 1. Giới thiệu</strong></h2>

<p>Hiện tại hầu như trang web nào cũng có một khung tìm kiếm để tìm các thông tin từ nó. Và chắc hẳn nhiều bạn vừa mới tìm hiểu về web không biết nên bắt đầu từ đâu để làm ra một khung search như thế đúng không?</p>

<p>Trong bài này mình sẽ hướng dẫn các bạn tạo một khung search đơn giản bằng Rails và Jquery.</p>

<p>Giao diện sẽ được trình bày như sau:</p>

<p>Giao diện khung search
<img src="/uploads/61548f66-2649-4997-8abb-7d7a08c9ea5f.png" alt="Screen Shot 2016-10-22 at 8.00.58 PM.png" /></p>

<p>Giao diện khung search lúc hiển thị kết quả
<img src="/uploads/e4a79183-2c1d-4cde-9290-ef9ec3792921.png" alt="Screen Shot 2016-10-22 at 8.00.36 PM.png" /></p>

<p>Nào chúng ta bắt đầu thôi.</p>

<h2 id="phần-2-chuẩn-bị"><strong>Phần 2. Chuẩn bị</strong></h2>

<h3 id="21-tạo-một-ứng-dụng-rails-mới"><strong>2.1. Tạo một ứng dụng Rails mới</strong></h3>

<p>Cái này thì chắc ai cũng làm được nhỉ :D</p>

<h3 id="22-thêm-các-gem-để-hỗ-trợ-việc-cài-đặt"><strong>2.2. Thêm các gem để hỗ trợ việc cài đặt</strong></h3>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gem</span> <span class="s2">"bootstrap-sass"</span>
<span class="n">gem</span> <span class="s2">"font-awesome-rails"</span>
<span class="sr">//</span> <span class="err">Để</span> <span class="n">t</span><span class="err">ạ</span><span class="n">o</span> <span class="n">c</span><span class="err">á</span><span class="n">c</span> <span class="n">bi</span><span class="err">ể</span><span class="n">u</span> <span class="n">th</span><span class="err">ứ</span><span class="n">c</span> <span class="n">search</span> <span class="n">nhanh</span> <span class="n">h</span><span class="err">ơ</span><span class="n">n</span>
<span class="n">gem</span> <span class="s2">"ransack"</span>
<span class="sr">//</span> <span class="no">T</span><span class="err">ạ</span><span class="n">o</span> <span class="n">d</span><span class="err">ữ</span> <span class="n">li</span><span class="err">ệ</span><span class="n">u</span> <span class="err">ả</span><span class="n">o</span> <span class="err">để</span> <span class="nb">test</span>
<span class="n">gem</span> <span class="s2">"faker"</span></code></pre></figure>

<h3 id="23-thêm-search-plugin"><strong>2.3. Thêm Search plugin</strong></h3>

<p>Các bạn hãy copy nội dung dưới đây và tạo ra file “searchbox.js” hoặc tên gì cũng được trong folder “app/assets/javascripts/”</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Author: Ryan Heath</span>
<span class="c1">// http://rpheath.com</span>
<span class="c1">// Mirs edited</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">HSearchBox</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">url</span><span class="p">:</span> <span class="s1">'/search'</span><span class="p">,</span>
      <span class="na">param</span><span class="p">:</span> <span class="s1">'query'</span><span class="p">,</span>
      <span class="na">dom_id</span><span class="p">:</span> <span class="s1">'#livesearch_results'</span><span class="p">,</span>
      <span class="na">delay</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>
      <span class="na">minChars</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="na">loading_css</span><span class="p">:</span> <span class="s1">'#livesearch_loading'</span><span class="p">,</span>
      <span class="na">del_id</span><span class="p">:</span> <span class="s1">'#livesearch_del'</span><span class="p">,</span>
      <span class="na">form_id</span><span class="p">:</span> <span class="s1">'#livesearch_form'</span><span class="p">,</span>
      <span class="na">dataType</span><span class="p">:</span> <span class="s1">'text'</span><span class="p">,</span>
      <span class="na">onInitSearch</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){},</span>
      <span class="na">onStartSearch</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){},</span>
      <span class="na">onFinishSearch</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){}</span><span class="nx">u</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">defaults</span><span class="p">,</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{})</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">loading_css</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">idle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">loading_css</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">loading</span><span class="p">()</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onStartSearch</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">idle</span><span class="p">()</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onFinishSearch</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">kill</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dom_id</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dom_id</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">del_id</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dom_id</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dom_id</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">form_id</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">del_id</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">resetTimer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timer</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">timer</span><span class="p">)</span> <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">process</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">terms</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">currentSearchBox</span> <span class="o">=</span> <span class="k">this</span>
      <span class="k">if</span> <span class="p">(</span><span class="sr">/</span><span class="se">\S</span><span class="sr">/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">terms</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
          <span class="na">type</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
          <span class="na">dataType</span> <span class="p">:</span> <span class="nx">currentSearchBox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dataType</span><span class="p">,</span>
          <span class="na">url</span><span class="p">:</span> <span class="nx">currentSearchBox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">search</span><span class="p">:</span> <span class="nx">terms</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span>
          <span class="p">},</span>
          <span class="na">complete</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">currentSearchBox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">del_id</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">currentSearchBox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dom_id</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">responseText</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">(</span><span class="nx">currentSearchBox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dom_id</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s1">':empty'</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">(</span><span class="nx">currentSearchBox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dom_id</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="nx">currentSearchBox</span><span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
          <span class="p">}</span>
        <span class="p">})</span>
        <span class="k">return</span> <span class="kc">false</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">currentSearchBox</span><span class="p">.</span><span class="nx">kill</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">hsearchbox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">configs</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hsearchbox</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HSearchBox</span><span class="p">(</span><span class="nx">configs</span><span class="p">)</span>
    <span class="nx">hsearchbox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onInitSearch</span><span class="p">()</span>
    <span class="nx">hsearchbox</span><span class="p">.</span><span class="nx">idle</span><span class="p">()</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">$input</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
      <span class="nx">$input</span>
        <span class="p">.</span><span class="nx">keyup</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">!=</span> <span class="k">this</span><span class="p">.</span><span class="nx">previousValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="sr">/</span><span class="se">\S</span><span class="sr">/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">$input</span><span class="p">.</span><span class="nx">val</span><span class="p">().</span><span class="nx">trim</span><span class="p">())</span> <span class="o">&amp;&amp;</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">val</span><span class="p">().</span><span class="nx">trim</span><span class="p">().</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">hsearchbox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">minChars</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">hsearchbox</span><span class="p">.</span><span class="nx">resetTimer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">)</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">hsearchbox</span><span class="p">.</span><span class="nx">start</span><span class="p">()</span>
                <span class="nx">hsearchbox</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">$input</span><span class="p">.</span><span class="nx">val</span><span class="p">())</span>
              <span class="p">},</span> <span class="nx">hsearchbox</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">)</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">hsearchbox</span><span class="p">.</span><span class="nx">kill</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">previousValue</span> <span class="o">=</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>
          <span class="p">}</span>
        <span class="p">})</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">)</span></code></pre></figure>

<p>Các bạn có thể vào link sau để xem hướng dẫn cách dùng plugin này.
<code class="highlighter-rouge">https://github.com/hoangmirs/searchbox/</code></p>

<p>Đây là một plugin của Ryan Heath và mình lấy về tùy biến thêm các phần cho phù hợp.</p>

<h2 id="phần-3-chiến-thôi"><strong>Phần 3. Chiến thôi</strong></h2>

<h3 id="31-tạo-ra-các-model-để-test"><strong>3.1. Tạo ra các model để test</strong></h3>

<p>Mình tạo 2 models để test, đó là User và Badge tương ứng như dưới.</p>

<p><strong>User</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">CreateUsers</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:users</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:username</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:fullname</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:email</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:avatar</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p><strong>Badge</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="k">class</span> <span class="nc">CreateBadges</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:badges</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:name</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:image</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">references</span> <span class="ss">:user</span><span class="p">,</span> <span class="ss">foreign_key: </span><span class="kp">true</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>Sau đó chạy Seed như sau để có dữ liệu test:</p>

<p><strong>Seed</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="nb">puts</span> <span class="s2">"Creating users...."</span>
<span class="mi">10</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
  <span class="n">fullname</span> <span class="o">=</span> <span class="no">Faker</span><span class="o">::</span><span class="no">Name</span><span class="p">.</span><span class="nf">name</span>
  <span class="n">username</span> <span class="o">=</span> <span class="no">Faker</span><span class="o">::</span><span class="no">Internet</span><span class="p">.</span><span class="nf">user_name</span>
  <span class="n">email</span> <span class="o">=</span> <span class="no">Faker</span><span class="o">::</span><span class="no">Internet</span><span class="p">.</span><span class="nf">email</span>
  <span class="n">avatar</span> <span class="o">=</span> <span class="s2">"/assets/user-</span><span class="si">#{</span><span class="n">n</span><span class="o">%</span><span class="mi">6</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">"</span>
  <span class="no">User</span><span class="p">.</span><span class="nf">create!</span> <span class="ss">fullname: </span><span class="n">fullname</span><span class="p">,</span> <span class="ss">username: </span><span class="n">username</span><span class="p">,</span> <span class="ss">email: </span><span class="n">email</span><span class="p">,</span> <span class="ss">avatar: </span><span class="n">avatar</span>
<span class="k">end</span>
<span class="nb">puts</span> <span class="s2">"Created users!"</span>
<span class="nb">puts</span> <span class="s2">"Creating badges...."</span>
<span class="mi">10</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="no">Faker</span><span class="o">::</span><span class="no">Book</span><span class="p">.</span><span class="nf">title</span>
  <span class="n">image</span> <span class="o">=</span> <span class="s2">"/assets/user-</span><span class="si">#{</span><span class="n">n</span><span class="o">%</span><span class="mi">6</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">user_id</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="no">User</span><span class="p">.</span><span class="nf">count</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="no">Badge</span><span class="p">.</span><span class="nf">create!</span> <span class="ss">name: </span><span class="nb">name</span><span class="p">,</span> <span class="ss">image: </span><span class="n">image</span><span class="p">,</span> <span class="ss">user_id: </span><span class="n">user_id</span>
<span class="k">end</span>
<span class="nb">puts</span> <span class="s2">"Created badges!"</span></code></pre></figure>

<p>Mình có để sẵn 6 cái hình ở trong thư mục <code class="highlighter-rouge">app/assets/images</code> nên có phần này:
<code class="highlighter-rouge">avatar = "/assets/user-#{n%6 + 1}"</code>.
Các bạn muốn thì cứ lên mạng kiếm 6 cái hình đặt tên dạng user-num cũng ok.</p>

<h3 id="32-tạo-controllers"><strong>3.2. Tạo controllers</strong></h3>

<p>Mình sẽ làm 3 khung tìm kiếm, khung đầu tiên sẽ tìm cả Users lẫn Badges, khung thứ nhìn tìm Users và khung thứ ba tìm Badges.
File <code class="highlighter-rouge">routes.rb</code> của mình sẽ có dạng như sau:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"search(/:search)"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"searches#index"</span><span class="p">,</span> <span class="ss">as: :search</span>
  <span class="n">resources</span> <span class="ss">:badges</span>
  <span class="n">resources</span> <span class="ss">:users</span>
<span class="k">end</span></code></pre></figure>

<p>Tạo <code class="highlighter-rouge">SearchesController</code> để tìm cả Users lẫn Badges
<strong>SeachesController</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="k">class</span> <span class="nc">SearchesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:search</span><span class="p">]</span>
    <span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">search</span><span class="p">(</span><span class="ss">fullname_or_username_or_email_cont: </span><span class="n">q</span><span class="p">).</span><span class="nf">result</span>
    <span class="n">badges</span> <span class="o">=</span> <span class="no">Badge</span><span class="p">.</span><span class="nf">search</span><span class="p">(</span><span class="ss">name_or_user_fullname_cont: </span><span class="n">q</span><span class="p">).</span><span class="nf">result</span>
      <span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:user</span><span class="p">)</span>
    <span class="vi">@items</span> <span class="o">=</span> <span class="n">users</span> <span class="o">+</span> <span class="n">badges</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">js</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>Ở đây mình dùng các pattern search của gem Ransack nên có khó hiểu thì tìm hiểu gem này nhé. Mình cũng trả về chung 1 mảng dữ liệu là @items, sau đó sẽ xử lí dưới view sau.</p>

<p><strong>UsersController</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="n">before_action</span> <span class="ss">:set_user</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span><span class="ss">:show</span><span class="p">,</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">:update</span><span class="p">,</span> <span class="ss">:destroy</span><span class="p">]</span>

  <span class="c1"># GET /users</span>
  <span class="c1"># GET /users.json</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:search</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">q</span>
      <span class="vi">@users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">search</span><span class="p">(</span><span class="ss">fullname_or_username_or_email_cont: </span><span class="n">q</span><span class="p">).</span><span class="nf">result</span>
    <span class="k">else</span>
      <span class="vi">@users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">all</span>
    <span class="k">end</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">js</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># GET /users/1</span>
  <span class="c1"># GET /users/1.json</span>
  <span class="k">def</span> <span class="nf">show</span>
  <span class="k">end</span>

  <span class="c1"># GET /users/new</span>
  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="c1"># GET /users/1/edit</span>
  <span class="k">def</span> <span class="nf">edit</span>
  <span class="k">end</span>

  <span class="c1"># POST /users</span>
  <span class="c1"># POST /users.json</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">user_params</span><span class="p">)</span>

    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="k">if</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">save</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@user</span><span class="p">,</span> <span class="ss">notice: </span><span class="s1">'User was successfully created.'</span> <span class="p">}</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">status: :created</span><span class="p">,</span> <span class="ss">location: </span><span class="vi">@user</span> <span class="p">}</span>
      <span class="k">else</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:new</span> <span class="p">}</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">json: </span><span class="vi">@user</span><span class="p">.</span><span class="nf">errors</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># PATCH/PUT /users/1</span>
  <span class="c1"># PATCH/PUT /users/1.json</span>
  <span class="k">def</span> <span class="nf">update</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="k">if</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">user_params</span><span class="p">)</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@user</span><span class="p">,</span> <span class="ss">notice: </span><span class="s1">'User was successfully updated.'</span> <span class="p">}</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">status: :ok</span><span class="p">,</span> <span class="ss">location: </span><span class="vi">@user</span> <span class="p">}</span>
      <span class="k">else</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:edit</span> <span class="p">}</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">json: </span><span class="vi">@user</span><span class="p">.</span><span class="nf">errors</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># DELETE /users/1</span>
  <span class="c1"># DELETE /users/1.json</span>
  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="vi">@user</span><span class="p">.</span><span class="nf">destroy</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="n">users_url</span><span class="p">,</span> <span class="ss">notice: </span><span class="s1">'User was successfully destroyed.'</span> <span class="p">}</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">head</span> <span class="ss">:no_content</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="c1"># Use callbacks to share common setup or constraints between actions.</span>
    <span class="k">def</span> <span class="nf">set_user</span>
      <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="k">end</span>

    <span class="c1"># Never trust parameters from the scary internet, only allow the white list through.</span>
    <span class="k">def</span> <span class="nf">user_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:user</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:username</span><span class="p">,</span> <span class="ss">:fullname</span><span class="p">,</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">:avatar</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>Cái này mình generate scaffold nên nó nhìu như vậy. Tương tự badges cũng thế. Hai cái này mình chỉ sửa lại action index thôi :D</p>

<p><strong>BadgesController</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="k">class</span> <span class="nc">BadgesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="n">before_action</span> <span class="ss">:set_badge</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span><span class="ss">:show</span><span class="p">,</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">:update</span><span class="p">,</span> <span class="ss">:destroy</span><span class="p">]</span>

  <span class="c1"># GET /badges</span>
  <span class="c1"># GET /badges.json</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:search</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">q</span>
      <span class="vi">@badges</span> <span class="o">=</span> <span class="no">Badge</span><span class="p">.</span><span class="nf">search</span><span class="p">(</span><span class="ss">name_or_user_fullname_cont: </span><span class="n">q</span><span class="p">).</span><span class="nf">result</span>
    <span class="k">else</span>
      <span class="vi">@badges</span> <span class="o">=</span> <span class="no">Badge</span><span class="p">.</span><span class="nf">all</span>
    <span class="k">end</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">js</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># GET /badges/1</span>
  <span class="c1"># GET /badges/1.json</span>
  <span class="k">def</span> <span class="nf">show</span>
  <span class="k">end</span>

  <span class="c1"># GET /badges/new</span>
  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@badge</span> <span class="o">=</span> <span class="no">Badge</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="c1"># GET /badges/1/edit</span>
  <span class="k">def</span> <span class="nf">edit</span>
  <span class="k">end</span>

  <span class="c1"># POST /badges</span>
  <span class="c1"># POST /badges.json</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@badge</span> <span class="o">=</span> <span class="no">Badge</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">badge_params</span><span class="p">)</span>

    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="k">if</span> <span class="vi">@badge</span><span class="p">.</span><span class="nf">save</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@badge</span><span class="p">,</span> <span class="ss">notice: </span><span class="s1">'Badge was successfully created.'</span> <span class="p">}</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">status: :created</span><span class="p">,</span> <span class="ss">location: </span><span class="vi">@badge</span> <span class="p">}</span>
      <span class="k">else</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:new</span> <span class="p">}</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">json: </span><span class="vi">@badge</span><span class="p">.</span><span class="nf">errors</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># PATCH/PUT /badges/1</span>
  <span class="c1"># PATCH/PUT /badges/1.json</span>
  <span class="k">def</span> <span class="nf">update</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="k">if</span> <span class="vi">@badge</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">badge_params</span><span class="p">)</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@badge</span><span class="p">,</span> <span class="ss">notice: </span><span class="s1">'Badge was successfully updated.'</span> <span class="p">}</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">status: :ok</span><span class="p">,</span> <span class="ss">location: </span><span class="vi">@badge</span> <span class="p">}</span>
      <span class="k">else</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:edit</span> <span class="p">}</span>
        <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">json: </span><span class="vi">@badge</span><span class="p">.</span><span class="nf">errors</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="c1"># DELETE /badges/1</span>
  <span class="c1"># DELETE /badges/1.json</span>
  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="vi">@badge</span><span class="p">.</span><span class="nf">destroy</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="n">badges_url</span><span class="p">,</span> <span class="ss">notice: </span><span class="s1">'Badge was successfully destroyed.'</span> <span class="p">}</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">json</span> <span class="p">{</span> <span class="n">head</span> <span class="ss">:no_content</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="c1"># Use callbacks to share common setup or constraints between actions.</span>
    <span class="k">def</span> <span class="nf">set_badge</span>
      <span class="vi">@badge</span> <span class="o">=</span> <span class="no">Badge</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="k">end</span>

    <span class="c1"># Never trust parameters from the scary internet, only allow the white list through.</span>
    <span class="k">def</span> <span class="nf">badge_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:badge</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:image</span><span class="p">,</span> <span class="ss">:user_id</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<h3 id="33-tạo-views"><strong>3.3. Tạo views</strong></h3>

<p>Ở file _header.html.erb mình làm 3 thanh navbar:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">HTML</span>
<span class="o">&lt;</span><span class="n">nav</span> <span class="k">class</span><span class="o">=</span><span class="s2">"navbar navbar-default"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"row"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="no">Brand</span> <span class="n">and</span> <span class="n">toggle</span> <span class="n">get</span> <span class="n">grouped</span> <span class="k">for</span> <span class="n">better</span> <span class="n">mobile</span> <span class="nb">display</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"col-md-2"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">a</span> <span class="k">class</span><span class="o">=</span><span class="s2">"navbar-brand"</span> <span class="n">href</span><span class="o">=</span><span class="s2">"#"</span><span class="o">&gt;</span><span class="no">All</span><span class="o">&lt;</span><span class="sr">/a&gt;
    &lt;/</span><span class="n">div</span><span class="o">&gt;</span>

    <span class="o">&lt;!--</span> <span class="no">Collect</span> <span class="n">the</span> <span class="n">nav</span> <span class="n">links</span><span class="p">,</span> <span class="n">forms</span><span class="p">,</span> <span class="n">and</span> <span class="n">other</span> <span class="n">content</span> <span class="k">for</span> <span class="n">toggling</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"col-md-8"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="sx">%= form_tag search_path, method: :get,
        class: "navbar-form search-form", id: "livesearch_form" do %&gt;
        &lt;div class=</span><span class="s2">"form-group dropdown"</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="sx">%= text_field_tag :search, params[:search],
            class: "form-control dropdown-toggle",
            placeholder: "Search...",
            "data-toggle": "dropdown", "aria-hidden": :true,
            autocomplete: :off, required: true, id: "livesearch_input" %&gt;
          &lt;ul class=</span><span class="s2">"dropdown-menu"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">"livesearch_dom"</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;
          &lt;/u</span><span class="n">l</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/div&gt;
        &lt;%= button_tag type: :submit, class: "btn btn-default" do %&gt;
          &lt;i class="fa fa-search"&gt;&lt;/i</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
      <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div&gt;&lt;!-- /</span><span class="p">.</span><span class="nf">navbar</span><span class="o">-</span><span class="n">collapse</span> <span class="o">--&gt;</span>
  <span class="o">&lt;</span><span class="sr">/div&gt;&lt;!-- /</span><span class="p">.</span><span class="nf">container</span><span class="o">-</span><span class="n">fluid</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="sr">/nav&gt;

&lt;nav class="navbar navbar-default"&gt;
  &lt;div class="row"&gt;
    &lt;!-- Brand and toggle get grouped for better mobile display --&gt;
    &lt;div class="col-md-2"&gt;
      &lt;a class="navbar-brand" href="#"&gt;Users&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div&gt;

    &lt;!-- Collect the nav links, forms, and other content for toggling --&gt;
    &lt;div class="col-md-8"&gt;
      &lt;%= form_tag users_path, method: :get,
        class: "navbar-form search-form", id: "livesearch_user_form" do %&gt;
        &lt;div class="form-group dropdown"&gt;
          &lt;%= text_field_tag :search, params[:search],
            class: "form-control dropdown-toggle",
            placeholder: "Search users...",
            "data-toggle": "dropdown", "aria-hidden": :true,
            autocomplete: :off, required: true, id: "livesearch_user_input" %&gt;
          &lt;ul class="dropdown-menu"&gt;
            &lt;div id="livesearch_user_dom"&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">"livesearch_user_loading"</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;
          &lt;/u</span><span class="n">l</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/div&gt;
        &lt;%= button_tag type: :submit, class: "btn btn-default" do %&gt;
          &lt;i class="fa fa-search"&gt;&lt;/i</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
      <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div&gt;&lt;!-- /</span><span class="p">.</span><span class="nf">navbar</span><span class="o">-</span><span class="n">collapse</span> <span class="o">--&gt;</span>
  <span class="o">&lt;</span><span class="sr">/div&gt;&lt;!-- /</span><span class="p">.</span><span class="nf">container</span><span class="o">-</span><span class="n">fluid</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="sr">/nav&gt;

&lt;nav class="navbar navbar-default"&gt;
  &lt;div class="row"&gt;
    &lt;!-- Brand and toggle get grouped for better mobile display --&gt;
    &lt;div class="col-md-2"&gt;
      &lt;a class="navbar-brand" href="#"&gt;Badges&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div&gt;

    &lt;!-- Collect the nav links, forms, and other content for toggling --&gt;
    &lt;div class="col-md-8"&gt;
      &lt;%= form_tag badges_path, method: :get,
        class: "navbar-form search-form", id: "livesearch_badge_form" do %&gt;
        &lt;div class="form-group dropdown"&gt;
          &lt;%= text_field_tag :search, params[:search],
            class: "form-control dropdown-toggle",
            placeholder: "Search badges...",
            "data-toggle": "dropdown", "aria-hidden": :true,
            autocomplete: :off, required: true, id: "livesearch_badge_input" %&gt;
          &lt;ul class="dropdown-menu"&gt;
            &lt;div id="livesearch_badge_dom"&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">"livesearch_badge_loading"</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;
          &lt;/u</span><span class="n">l</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/div&gt;
        &lt;%= button_tag type: :submit, class: "btn btn-default" do %&gt;
          &lt;i class="fa fa-search"&gt;&lt;/i</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
      <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div&gt;&lt;!-- /</span><span class="p">.</span><span class="nf">navbar</span><span class="o">-</span><span class="n">collapse</span> <span class="o">--&gt;</span>
  <span class="o">&lt;</span><span class="sr">/div&gt;&lt;!-- /</span><span class="p">.</span><span class="nf">container</span><span class="o">-</span><span class="n">fluid</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="sr">/nav&gt;</span></code></pre></figure>

<p>Ban đầu chỉ định thêm một cái thôi, nhưng nhác quá nên quất cả 3 cái trong này luôn.</p>

<p>Bây giờ ình sẽ làm view kết quả để hiển thị:</p>

<p>Mình tạo folder <code class="highlighter-rouge">app/views/shared</code> và tạo file <code class="highlighter-rouge">_search.html.erb</code>. Mục đích là định nghĩa cái view kết quả khi tìm kiếm ở khung tìm kiếm cả Users và Badges.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">HTML</span>
<span class="o">&lt;</span><span class="sx">% if </span><span class="n">items</span><span class="p">.</span><span class="nf">blank?</span> <span class="sx">%&gt;
  &lt;li&gt;</span>
    <span class="o">&lt;</span><span class="sx">%= link_to search_path(params[:search]),
      class: "btn btn-default btn-block" do %&gt;
      &lt;%=</span> <span class="s2">"No results for </span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:search</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span> <span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
  <span class="o">&lt;</span><span class="sr">/li&gt;
&lt;% else %&gt;
  &lt;div class="scrollable-menu"&gt;
    &lt;% items.each do |item| %&gt;
      &lt;% if item.is_a? User %&gt;
        &lt;%= render "users/se</span><span class="n">arch_item</span><span class="s2">", user: item %&gt;
      &lt;% elsif item.is_a? Badge %&gt;
        &lt;%= render "</span><span class="n">badges</span><span class="o">/</span><span class="n">search_item</span><span class="s2">", badge: item %&gt;
      &lt;% end %&gt;
    &lt;% end %&gt;
  &lt;/div&gt;
  &lt;li class="</span><span class="n">divider</span><span class="s2">"&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;%= link_to search_path(params[:search]),
      class: "</span><span class="n">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">default</span> <span class="n">btn</span><span class="o">-</span><span class="n">block</span><span class="s2">" do %&gt;
      &lt;%= "</span><span class="no">See</span> <span class="n">more</span> <span class="c1">#{items.size} for #{params[:search]}" %&gt;</span>
    <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
  <span class="o">&lt;</span><span class="sr">/li&gt;
&lt;% end %&gt;</span></code></pre></figure>

<p>Như khi nãy mình có nói là mình truyền về @items, thì trong này mình sẽ check xem từng từng item đó là gì và hiển thị partial tương ứng.</p>

<p>Tiếp theo sẽ đến tạo partial.</p>

<p>Mình tạo thêm partial <code class="highlighter-rouge">search_item</code> cho users bằng cách tạo file <code class="highlighter-rouge">_search_item.html.erb</code> trong folder <code class="highlighter-rouge">app/views/users</code>
<strong>_search_item.html.erb</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">HTML</span>
<span class="o">&lt;</span><span class="n">li</span> <span class="k">class</span><span class="o">=</span><span class="s2">"search-item"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sx">%= link_to user do %&gt;
    &lt;div class=</span><span class="s2">"col-md-3"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="sx">%= image_tag user.avatar, class: "img-responsive" %&gt;
    &lt;/div&gt;
    &lt;div class=</span><span class="s2">"col-md-9"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"row"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;&lt;</span><span class="sx">%= user.fullname %&gt;&lt;/strong&gt;
      &lt;/div&gt;
      &lt;div class=</span><span class="s2">"row"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"col-md-8"</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="sx">%= user.email %&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=</span><span class="s2">"row"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">i</span><span class="o">&gt;&lt;</span><span class="sx">%= User.name %&gt;&lt;/i&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=</span><span class="s2">"clearfix"</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;
  &lt;% end %&gt;
&lt;/</span><span class="n">li</span><span class="o">&gt;</span></code></pre></figure>

<p>Tương tự cho Badges, tạo file <code class="highlighter-rouge">_search_item.html.erb</code> trong folder <code class="highlighter-rouge">app/views/badges</code></p>

<p><strong>_search_item.html.erb</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">HTML</span>
<span class="o">&lt;</span><span class="n">li</span> <span class="k">class</span><span class="o">=</span><span class="s2">"search-item"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sx">%= link_to badge do %&gt;
    &lt;div class=</span><span class="s2">"col-xs-12 col-sm-3 col-md-3"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="sx">%= image_tag badge.image, class: "img-responsive" %&gt;
    &lt;/div&gt;
    &lt;div class=</span><span class="s2">"col-xs-12 col-sm-9 col-md-9"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"row"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;&lt;</span><span class="sx">%= badge.name %&gt;&lt;/strong&gt;
      &lt;/div&gt;
      &lt;div class=</span><span class="s2">"row"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"col-md-8"</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="sx">%= badge.user.fullname %&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=</span><span class="s2">"row"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">i</span><span class="o">&gt;&lt;</span><span class="sx">%= Badge.name %&gt;&lt;/i&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=</span><span class="s2">"clearfix"</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;
  &lt;% end %&gt;
&lt;/</span><span class="n">li</span><span class="o">&gt;</span></code></pre></figure>

<p>Vậy là xong cho view. Tiếp theo chúng ta sẽ thêm vài đoạn JS để nó chạy nào.</p>

<h3 id="34-tạo-các-đoạn-javascript"><strong>3.4. Tạo các đoạn JavaScript</strong></h3>

<h4 id="341-khởi-tạo-searchbox"><strong>3.4.1. Khởi tạo searchbox</strong></h4>

<p>Chúng ta sẽ khởi tạo các searchbox bằng cách tạo 1 file js ở <code class="highlighter-rouge">app/assets/javascripts</code> và đặt tên tùy ý. Ở đây mình đặt là <code class="highlighter-rouge">header.js</code> vì mấy khung search của mình để ở header :))</p>

<p><strong>header.js</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">JavaScript</span>
<span class="err">$</span><span class="p">(</span><span class="n">document</span><span class="p">).</span><span class="nf">ready</span><span class="p">(</span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="err">$</span><span class="p">(</span><span class="s1">'#livesearch_input'</span><span class="p">).</span><span class="nf">hsearchbox</span><span class="p">({</span>
    <span class="ss">url: </span><span class="err">$</span><span class="p">(</span><span class="s1">'#livesearch_form'</span><span class="p">).</span><span class="nf">attr</span><span class="p">(</span><span class="s1">'action'</span><span class="p">),</span>
    <span class="ss">param: </span><span class="s1">'search'</span><span class="p">,</span>
    <span class="ss">dom_id: </span><span class="s1">'#livesearch_dom'</span><span class="p">,</span>
    <span class="ss">loading_css: </span><span class="s1">'#livesearch_loading'</span><span class="p">,</span>
    <span class="ss">onInitSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"search init:"</span> <span class="o">+</span> <span class="n">this</span><span class="p">.</span><span class="nf">url</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="ss">onStartSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"search start"</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="ss">onFinishSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"search finish"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="err">$</span><span class="p">(</span><span class="s1">'#livesearch_user_input'</span><span class="p">).</span><span class="nf">hsearchbox</span><span class="p">({</span>
    <span class="ss">url: </span><span class="err">$</span><span class="p">(</span><span class="s1">'#livesearch_user_form'</span><span class="p">).</span><span class="nf">attr</span><span class="p">(</span><span class="s1">'action'</span><span class="p">),</span>
    <span class="ss">param: </span><span class="s1">'search'</span><span class="p">,</span>
    <span class="ss">dom_id: </span><span class="s1">'#livesearch_user_dom'</span><span class="p">,</span>
    <span class="ss">loading_css: </span><span class="s1">'#livesearch_user_loading'</span><span class="p">,</span>
    <span class="ss">onInitSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"user init:"</span> <span class="o">+</span> <span class="n">this</span><span class="p">.</span><span class="nf">url</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="ss">onStartSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"user start"</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="ss">onFinishSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"user finish"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="err">$</span><span class="p">(</span><span class="s1">'#livesearch_badge_input'</span><span class="p">).</span><span class="nf">hsearchbox</span><span class="p">({</span>
    <span class="ss">url: </span><span class="err">$</span><span class="p">(</span><span class="s1">'#livesearch_badge_form'</span><span class="p">).</span><span class="nf">attr</span><span class="p">(</span><span class="s1">'action'</span><span class="p">),</span>
    <span class="ss">param: </span><span class="s1">'search'</span><span class="p">,</span>
    <span class="ss">dom_id: </span><span class="s1">'#livesearch_badge_dom'</span><span class="p">,</span>
    <span class="ss">loading_css: </span><span class="s1">'#livesearch_badge_loading'</span><span class="p">,</span>
    <span class="ss">onInitSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"badge init:"</span> <span class="o">+</span> <span class="n">this</span><span class="p">.</span><span class="nf">url</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="ss">onStartSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"badge start"</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="ss">onFinishSearch: </span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"badge finish"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span></code></pre></figure>

<p>Phần config này các bạn có thể tìm hiểu thêm ở link <code class="highlighter-rouge">github</code> của plugin mình gửi ở trên.</p>

<h4 id="342-các-file-js-để-render-kết-quả"><strong>3.4.2. Các file JS để render kết quả</strong></h4>

<p>Mình có 3 files JS tất cả, tương ứng với 3 action <code class="highlighter-rouge">index</code> của 3 controllers phía trên. Những files này để trả về kết quả cho plugin và hiển thị ra.</p>

<p><strong>app/views/searches/index.js.erb</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="o">&lt;</span><span class="sx">%= render "shared/search", items: @items %&gt;</span></code></pre></figure>

<p><strong>app/views/users/index.js.erb</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="o">&lt;</span><span class="sx">%= render "shared/search", items: @users %&gt;</span></code></pre></figure>

<p><strong>app/views/badges/index.js.erb</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Ruby</span>
<span class="o">&lt;</span><span class="sx">%= render "shared/search", items: @badges %&gt;</span></code></pre></figure>

<h3 id="35-bonus-thêm-css"><strong>3.5. Bonus thêm css</strong></h3>

<p>Mình có tạo file <code class="highlighter-rouge">app/assets/stylesheets/livesearch.scss</code> để custom cái khung search cho dễ nhìn tí. Các bạn có thể copy về để thử.</p>

<p>**livesearch.scss</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">SCSS</span>
<span class="p">.</span><span class="nf">scrollable</span><span class="o">-</span><span class="n">menu</span> <span class="p">{</span>
  <span class="ss">height: </span><span class="n">auto</span><span class="p">;</span>
  <span class="n">max</span><span class="o">-</span><span class="ss">height: </span><span class="mi">500</span><span class="n">px</span><span class="p">;</span>
  <span class="n">overflow</span><span class="o">-</span><span class="ss">x: </span><span class="n">hidden</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">li</span><span class="p">.</span><span class="nf">search</span><span class="o">-</span><span class="n">item</span> <span class="p">{</span>
  <span class="ss">height: </span><span class="mi">75</span><span class="n">px</span><span class="p">;</span>
  <span class="ss">margin: </span><span class="mi">10</span><span class="n">px</span><span class="p">;</span>
  <span class="o">&amp;</span><span class="ss">:hover</span> <span class="p">{</span>
    <span class="n">background</span><span class="o">-</span><span class="ss">color: </span><span class="c1">#ecf0f1;</span>
    <span class="n">cursor</span><span class="ss">:pointer</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">a</span><span class="ss">:link</span> <span class="p">{</span>
   <span class="n">color</span><span class="ss">:inherit</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">#livesearch {</span>
  <span class="n">a</span> <span class="p">{</span>
    <span class="ss">color: </span><span class="c1">#66757f;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">.</span><span class="nf">search</span><span class="o">-</span><span class="n">form</span> <span class="p">{</span>
  <span class="ss">display: </span><span class="n">table</span><span class="p">;</span>
  <span class="ss">width: </span><span class="mi">500</span><span class="n">px</span><span class="p">;</span>
  <span class="n">background</span><span class="o">-</span><span class="ss">color: </span><span class="c1">#fff;</span>
  <span class="ss">padding: </span><span class="mi">0</span><span class="p">;</span>
  <span class="p">.</span><span class="nf">form</span><span class="o">-</span><span class="n">group</span> <span class="p">{</span>
    <span class="ss">display: </span><span class="n">table</span><span class="o">-</span><span class="n">cell</span><span class="p">;</span>
    <span class="ss">width: </span><span class="mi">100</span><span class="o">%</span><span class="p">;</span>
    <span class="p">.</span><span class="nf">form</span><span class="o">-</span><span class="n">control</span> <span class="p">{</span>
      <span class="ss">width: </span><span class="mi">100</span><span class="o">%</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
    <span class="n">button</span> <span class="p">{</span>
      <span class="ss">display: </span><span class="n">table</span><span class="o">-</span><span class="n">cell</span><span class="p">;</span>
      <span class="ss">width: </span><span class="mi">70</span><span class="n">px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">.</span><span class="nf">dropdown</span><span class="o">-</span><span class="n">menu</span> <span class="p">{</span>
  <span class="ss">padding: </span><span class="mi">0</span><span class="p">;</span>
  <span class="ss">border: </span><span class="n">none</span><span class="p">;</span>
  <span class="ss">width: </span><span class="mi">100</span><span class="o">%</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Vậy là xong. Chúng ta đã có bộ 3 khung tìm kiếm ngon lành rồi (chuckle)</p>

<h2 id="phần-3-kết-luận"><strong>Phần 3. Kết luận</strong></h2>

<p>Qua bài chia sẻ bên trên, mình mong các bạn sẽ có thể tự tùy biến được cho mình một khung tìm kiếm đơn giản. Nếu thấy bài viết bổ ích, các bạn hãy ủng hộ cho mình nhé.
 Dưới đây mình note lại link <code class="highlighter-rouge">github</code> của cái plugin và example mình làm mẫu. Các bạn có thể lấy về vọc thử:
 <code class="highlighter-rouge">https://github.com/hoangmirs/searchbox/</code>
 <code class="highlighter-rouge">https://github.com/hoangmirs/hsearchbox-example</code></p>

<p>Nếu thấy hay thì nhớ <strong>Star</strong> cho mình. Cảm ơn các bạn.</p>

    </div>
  </div>
</article>



    </div>
  </main>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114940904-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114940904-1');
</script>

</body>
</html>
